// Generated by BUCKLESCRIPT VERSION 4.0.6, PLEASE EDIT WITH CARE
'use strict';

var Block = require("bs-platform/lib/js/block.js");

var States = /* module */[];

var Events = /* module */[];

var Commands = /* module */[];

function handleEvent(s, e) {
  if (typeof s === "number") {
    if (typeof e === "number") {
      switch (e) {
        case 0 : 
            return /* tuple */[
                    /* Locked */Block.__(0, [0]),
                    /* CloseDoors */1
                  ];
        case 1 : 
            return /* tuple */[
                    /* Broken */Block.__(1, [s]),
                    /* Noop */3
                  ];
        case 2 : 
            return /* tuple */[
                    s,
                    /* Noop */3
                  ];
        
      }
    } else {
      return /* tuple */[
              s,
              /* Noop */3
            ];
    }
  } else if (s.tag) {
    if (typeof e === "number" && e >= 2) {
      return /* tuple */[
              s[0],
              /* Noop */3
            ];
    } else {
      return /* tuple */[
              s,
              /* Noop */3
            ];
    }
  } else if (typeof e === "number") {
    switch (e) {
      case 0 : 
          return /* tuple */[
                  s,
                  /* SoundAlarm */0
                ];
      case 1 : 
          return /* tuple */[
                  /* Broken */Block.__(1, [s]),
                  /* Noop */3
                ];
      case 2 : 
          return /* tuple */[
                  s,
                  /* Noop */3
                ];
      
    }
  } else {
    var newCredit = s[0] + e[0] | 0;
    var farePriceExceeded = newCredit >= 50;
    if (farePriceExceeded) {
      return /* tuple */[
              /* Unlocked */0,
              /* OpenDoors */2
            ];
    } else {
      return /* tuple */[
              /* Locked */Block.__(0, [newCredit]),
              /* Noop */3
            ];
    }
  }
}

var TurnstyleStateMachine = /* module */[
  /* States */States,
  /* Events */Events,
  /* Commands */Commands,
  /* handleEvent */handleEvent
];

exports.TurnstyleStateMachine = TurnstyleStateMachine;
/* No side effect */
